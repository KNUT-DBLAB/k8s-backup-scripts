#################################################
# rsnapshot.conf - rsnapshot configuration file #
#################################################
#                                               #
# PLEASE BE AWARE OF THE FOLLOWING RULE:        #
#                                               #
# This file requires tabs between elements      #
#                                               #
#################################################

#######################
# CONFIG FILE VERSION #
#######################

config_version	1.2

###########################
# SNAPSHOT ROOT DIRECTORY #
###########################

# All snapshots will be stored under this root directory.
#
snapshot_root	/home/oys/grad-exp/rsnap-k8s/

# If no_create_root is enabled, rsnapshot will not automatically create the
# snapshot_root directory. This is particularly useful if you are backing
# up to removable media, such as a FireWire or USB drive.
#
#no_create_root	1

#################################
# EXTERNAL PROGRAM DEPENDENCIES #
#################################

# LINUX USERS:   Be sure to uncomment "cmd_cp". This gives you extra features.
# EVERYONE ELSE: Leave "cmd_cp" commented out for compatibility.
#
# See the README file or the man page for more details.
#
cmd_cp		/bin/cp

# uncomment this to use the rm program instead of the built-in perl routine.
#
cmd_rm		/bin/rm

# rsync must be enabled for anything to work. This is the only command that
# must be enabled.
#
cmd_rsync	/usr/bin/rsync

# Uncomment this to enable remote ssh backups over rsync.
#
#cmd_ssh	/usr/bin/ssh

# Comment this out to disable syslog support.
#
cmd_logger	/usr/bin/logger

# Uncomment this to specify the path to "du" for disk usage checks.
# If you have an older version of "du", you may also want to check the
# "du_args" parameter below.
#
#cmd_du		/usr/bin/du

# Uncomment this to specify the path to rsnapshot-diff.
#
#cmd_rsnapshot_diff	/usr/bin/rsnapshot-diff

# Specify the path to a script (and any optional arguments) to run right
# before rsnapshot syncs files
#
#cmd_preexec	/path/to/preexec/script

# Specify the path to a script (and any optional arguments) to run right
# after rsnapshot syncs files
#
#cmd_postexec	/path/to/postexec/script

# Paths to lvcreate, lvremove, mount and umount commands, for use with
# Linux LVMs.
#
#linux_lvm_cmd_lvcreate	/sbin/lvcreate
#linux_lvm_cmd_lvremove	/sbin/lvremove
#linux_lvm_cmd_mount	/bin/mount
#linux_lvm_cmd_umount	/bin/umount

#########################################
#     BACKUP LEVELS / INTERVALS         #
# Must be unique and in ascending order #
# e.g. alpha, beta, gamma, etc.         #
#########################################

retain	alpha	1
# retain	beta	7
# retain	gamma	4
#retain	delta	3

############################################
#              GLOBAL OPTIONS              #
# All are optional, with sensible defaults #
############################################

# Verbose level, 1 through 5.
# 1     Quiet           Print fatal errors only
# 2     Default         Print errors and warnings only
# 3     Verbose         Show equivalent shell commands being executed
# 4     Extra Verbose   Show extra verbose information
# 5     Debug mode      Everything
#
verbose		2

# Same as "verbose" above, but controls the amount of data sent to the
# logfile, if one is being used. The default is 3.
# If you want the rsync output, you have to set it to 4
#
loglevel	4

# If you enable this, data will be written to the file you specify. The
# amount of data written is controlled by the "loglevel" parameter.
#
logfile	/home/oys/grad-exp/rsnap-k8s/rsnap-k8s.log

# If enabled, rsnapshot will write a lockfile to prevent two instances
# from running simultaneously (and messing up the snapshot_root).
# If you enable this, make sure the lockfile directory is not world
# writable. Otherwise anyone can prevent the program from running.
#
lockfile	/var/run/rsnapshot.pid

# By default, rsnapshot check lockfile, check if PID is running
# and if not, consider lockfile as stale, then start
# Enabling this stop rsnapshot if PID in lockfile is not running
#
#stop_on_stale_lockfile		0

# Default rsync args. All rsync commands have at least these options set.
#
#rsync_short_args	-a
#rsync_long_args	--delete --numeric-ids --relative --delete-excluded

# ssh has no args passed by default, but you can specify some here.
#
#ssh_args	-p 22

# Default arguments for the "du" program (for disk space reporting).
# The GNU version of "du" is preferred. See the man page for more details.
# If your version of "du" doesn't support the -h flag, try -k flag instead.
#
#du_args	-csh

# If this is enabled, rsync won't span filesystem partitions within a
# backup point. This essentially passes the -x option to rsync.
# The default is 0 (off).
#
#one_fs		0

# The include and exclude parameters, if enabled, simply get passed directly
# to rsync. If you have multiple include/exclude patterns, put each one on a
# separate line. Please look up the --include and --exclude options in the
# rsync man page for more details on how to specify file name patterns.
#
#include	???
#include	???
#exclude	???
#exclude	???

# The include_file and exclude_file parameters, if enabled, simply get
# passed directly to rsync. Please look up the --include-from and
# --exclude-from options in the rsync man page for more details.
#
#include_file	/path/to/include/file
#exclude_file	/path/to/exclude/file

# If your version of rsync supports --link-dest, consider enabling this.
# This is the best way to support special files (FIFOs, etc) cross-platform.
# The default is 0 (off).
#
#link_dest	0

# When sync_first is enabled, it changes the default behaviour of rsnapshot.
# Normally, when rsnapshot is called with its lowest interval
# (i.e.: "rsnapshot alpha"), it will sync files AND rotate the lowest
# intervals. With sync_first enabled, "rsnapshot sync" handles the file sync,
# and all interval calls simply rotate files. See the man page for more
# details. The default is 0 (off).
#
#sync_first	0

# If enabled, rsnapshot will move the oldest directory for each interval
# to [interval_name].delete, then it will remove the lockfile and delete
# that directory just before it exits. The default is 0 (off).
#
#use_lazy_deletes	0

# Number of rsync re-tries. If you experience any network problems or
# network card issues that tend to cause ssh to fail with errors like
# "Corrupted MAC on input", for example, set this to a non-zero value
# to have the rsync operation re-tried.
#
#rsync_numtries 0

# LVM parameters. Used to backup with creating lvm snapshot before backup
# and removing it after. This should ensure consistency of data in some special
# cases
#
# LVM snapshot(s) size (lvcreate --size option).
#
#linux_lvm_snapshotsize	100M

# Name to be used when creating the LVM logical volume snapshot(s).
#
#linux_lvm_snapshotname	rsnapshot

# Path to the LVM Volume Groups.
#
#linux_lvm_vgpath	/dev

# Mount point to use to temporarily mount the snapshot(s).
#
#linux_lvm_mountpath	/path/to/mount/lvm/snapshot/during/backup

###############################
### BACKUP POINTS / SCRIPTS ###
###############################

# k8s test

# backup	/home/oys/pvs/		localhost/

# backup	/var/lib/containers/		localhost/
# backup	/var/lib/etcd/		localhost/
# backup	/var/lib/cni/		localhost/
# backup	/var/lib/kubelet/		localhost/


# podman pull
# backup	/run/containers/		localhost/
# backup	/run/systemd/transient/		localhost/
# backup	/run/systemd/units/		localhost/
# backup	/run/systemd/users/		localhost/
# backup	/var/cache/containers/		localhost/
# backup	/var/lib/containers/storage/		localhost/

# backup	/var/lib/containers/storage/libpod/		localhost/
# backup	/var/lib/containers/storage/mounts/		localhost/
# backup	/var/lib/containers/storage/storage.lock		localhost/
# backup	/var/lib/containers/storage/tmp/		localhost/
# backup	/var/lib/containers/storage/overlay-containers/		localhost/

# CONCLUSION of pull images
# backup	/var/lib/containers/storage/overlay/		localhost/
# backup	/var/lib/containers/storage/overlay-images/		localhost/
# backup	/var/lib/containers/storage/overlay-layers/		localhost/
# CONCLUSION of pull images


# apply wordpress
# backup	/run/systemd/transient/		localhost/
# backup	/var/lib/etcd/		localhost/
# backup	/home/oys/pvs/		localhost/
# backup	/run/containers/storage/overlay-containers/		localhost/
# backup	/run/containers/storage/overlay-layers/		localhost/
# backup	/run/crio/		localhost/
# backup	/run/ipcns/		localhost/
# backup	/run/netns/		localhost/
# backup	/run/runc/		localhost/
# backup	/run/systemd/netif/		localhost/
# backup	/run/systemd/resolve/		localhost/
# backup	/run/systemd/transient/		localhost/
# backup	/run/systemd/units/		localhost/
# backup	/run/udev/data/		localhost/
# backup	/run/udev/tags/		localhost/
# backup	/run/utsns/		localhost/
# backup	/var/lib/cni/		localhost/
# backup	/var/lib/containers/storage/overlay/		localhost/
# backup	/var/lib/containers/storage/overlay-containers/		localhost/
# backup	/var/lib/containers/storage/overlay-layers/		localhost/
# backup	/var/lib/kubelet/pods/		localhost/

# Whole k8s system
# backup	/etc/sysctl.d/99-kubernetes-cri.conf		localhost/

# # backup	/proc/sys/		localhost/

# backup	/usr/share/keyrings/kubernetes-archive-keyring.gpg		localhost/

# backup	/sys/fs/cgroup/		localhost/
# backup	/usr/share/doc/apt-transport-https/		localhost/
# backup	/var/cache/apt/pkgcache.bin		localhost/
# backup	/var/lib/apt/extended_states		localhost/
# # backup	/var/lib/apt/archives		localhost/
# backup	/var/lib/dpkg/status		localhost/

# backup	/usr/share/keyrings/kubernetes-archive-keyring.gpg		localhost/

# backup	/usr/share/keyrings/libcontainers-crio-archive-keyring.gpg		localhost/

# backup	/etc/apt/sources.list.d/		localhost/

# backup	/etc/cni/		localhost/
# backup	/etc/containers/		localhost/
# backup	/etc/crictl.yaml		localhost/
# backup	/etc/crio		localhost/
# backup	/etc/default/crio		localhost/
# backup	/sys/fs/cgroup/		localhost/
# backup	/usr/bin/conmon		localhost/
# backup	/usr/bin/crio		localhost/
# backup	/usr/bin/crio-status		localhost/
# backup	/usr/bin/pinns		localhost/
# backup	/usr/lib/systemd/system/crio-wipe.service		localhost/
# backup	/usr/lib/systemd/system/crio.service		localhost/
# backup	/usr/libexec/crio/		localhost/
# backup	/usr/libexec/podman/		localhost/
# backup	/usr/share/bash-completion/completions/crio		localhost/
# backup	/usr/share/containers/		localhost/
# backup	/usr/share/doc/		localhost/
# backup	/usr/share/fish/		localhost/
# backup	/usr/share/man/		localhost/
# backup	/usr/share/oci-umount/		localhost/
# backup	/var/lib/apt/extended_states		localhost/
# backup	/var/lib/containers/		localhost/
# backup	/var/lib/dpkg/info/		localhost/
# backup	/var/lib/dpkg/status		localhost/

# backup	/sys/fs/cgroup/		localhost/
# backup	/usr/lib/cri-o-runc/		localhost/
# backup	/usr/share/doc/		localhost/
# backup	/var/lib/apt/extended_states		localhost/
# backup	/var/lib/dpkg/info/		localhost/
# backup	/var/lib/dpkg/status		localhost/

# backup	/etc/kubernetes/		localhost/
# backup	/opt/cni/		localhost/
# backup	/run/cloud-init/		localhost/
# backup	/run/NetworkManager/conf.d/netplan.conf		localhost/
# backup	/run/systemd/ask-password-block/		localhost/
# backup	/run/systemd/generator.early/		localhost/
# backup	/run/systemd/generator.late/		localhost/
# backup	/run/systemd/generator/		localhost/
# backup	/run/systemd/inhibit/		localhost/
# backup	/run/systemd/network/10-netplan-eth0.network		localhost/
# backup	/run/systemd/system/		localhost/
# backup	/run/systemd/system/netplan-ovs-cleanup.service		localhost/
# backup	/run/systemd/units/		localhost/
# backup	/sys/fs/cgroup/		localhost/
# backup	/usr/bin/crictl		localhost/
# backup	/usr/bin/kubeadm		localhost/
# backup	/usr/bin/kubectl		localhost/
# backup	/usr/bin/kubelet		localhost/
# backup	/usr/bin/procan		localhost/
# backup	/usr/bin/socat		localhost/
# backup	/usr/lib/ebtables/		localhost/
# backup	/usr/sbin/conntrack		localhost/
# backup	/usr/sbin/ebtables-legacy		localhost/
# backup	/usr/sbin/ebtablesd		localhost/
# backup	/usr/sbin/ebtablesu		localhost/
# backup	/usr/share/doc-base/		localhost/
# backup	/usr/share/doc/		localhost/
# backup	/usr/share/lintian/overrides/socat		localhost/
# backup	/usr/share/man/		localhost/
# backup	/var/lib/apt/extended_states		localhost/
# backup	/var/lib/dpkg/		localhost/

# backup	/etc/systemd/system/cri-o.service		localhost/
# backup	/etc/systemd/system/kubelet.service.d/		localhost/
# backup	/etc/systemd/system/multi-user.target.wants/crio.service		localhost/
# backup	/usr/lib/systemd/system/kubelet.service		localhost/
# backup	/var/lib/systemd/deb-systemd-helper-enabled/multi-user.target.wants/kubelet.service		localhost/
# backup	/var/lib/systemd/deb-systemd-helper-enabled/kubelet.service.dsh-also		localhost/

# # /run/containers/storage/overlay-containers/
# backup	/run/crio/		localhost/
# backup	/run/ipcns/		localhost/
# backup	/run/netns/		localhost/
# backup	/run/NetworkManager/		localhost/
# backup	/run/runc/		localhost/
# backup	/run/systemd/		localhost/
# backup	/run/systemd/generator/		localhost/
# backup	/run/systemd/network/		localhost/
# backup	/run/systemd/system/		localhost/
# backup	/run/systemd/transient/		localhost/
# backup	/run/systemd/units/		localhost/
# backup	/run/utsns/		localhost/
# backup	/usr/libexec/kubernetes		localhost/

# backup	/home/oys/.kube/		localhost/

# backup	/var/lib/kubelet/		localhost/

# backup	/var/lib/etcd/		localhost/


#220601 inst common ~ kubeadm init
# backup	/dev/shm/		localhost/
# backup	/etc/apt/sources.list.d/		localhost/

backup	/etc/cni/		localhost/
backup	/etc/containers/		localhost/
backup	/etc/crictl.yaml		localhost/
backup	/etc/crio/		localhost/
backup	/etc/dconf		localhost/
backup	/etc/default/crio		localhost/
backup	/etc/kubernetes/		localhost/
backup	/etc/sysctl.d/99-kubernetes-cri.conf		localhost/
backup	/etc/systemd/system/		localhost/
backup	/opt/cni/		localhost/

# backup	/run/cloud-init/		localhost/
# backup	/run/containers/		localhost/
# backup	/run/crio/		localhost/
# backup	/run/ipcns/		localhost/
# backup	/run/libpod/		localhost/
# backup	/run/needrestart/		localhost/
# backup	/run/NetworkManager/		localhost/
# backup	/run/pidns/		localhost/
# backup	/run/podman/		localhost/
# backup	/run/systemd/		localhost/
# backup	/run/userns/		localhost/
# backup	/run/utmp		localhost/
# backup	/sys/fs/cgroup/		localhost/ 접근 불가
# backup	/usr/bin/		localhost/
backup	/usr/bin/buildah		localhost/
backup	/usr/bin/compel		localhost/
backup	/usr/bin/conmon		localhost/
backup	/usr/bin/crictl		localhost/
backup	/usr/bin/crio		localhost/
backup	/usr/bin/crio-status		localhost/
backup	/usr/bin/crit		localhost/
backup	/usr/bin/crun		localhost/
backup	/usr/bin/filan		localhost/
backup	/usr/bin/kubeadm		localhost/
backup	/usr/bin/kubectl		localhost/
backup	/usr/bin/kubelet		localhost/
backup	/usr/bin/newgidmap		localhost/
backup	/usr/bin/newuidmap		localhost/
backup	/usr/bin/pinns		localhost/
backup	/usr/bin/podman		localhost/
backup	/usr/bin/procan		localhost/
backup	/usr/bin/session-migration		localhost/
backup	/usr/bin/socat		localhost/
backup	/usr/include/		localhost/
# backup	/usr/lib/		localhost/
backup	/usr/lib/cni/		localhost/
backup	/usr/lib/compel/		localhost/
backup	/usr/lib/cri-o-runc/		localhost/
backup	/usr/lib/cri-o-runc/		localhost/
backup	/usr/lib/criu/		localhost/
backup	/usr/lib/ebtables/		localhost/
backup	/usr/lib/libcrun.a		localhost/
backup	/usr/lib/libcrun.la		localhost/
backup	/usr/lib/python3/		localhost/
# backup	/usr/lib/systemd/		localhost/	ssh가 뻑나
backup	/usr/lib/systemd/system/cni-dhcp.service		localhost/
backup	/usr/lib/systemd/system/cni-dhcp.socket		localhost/
backup	/usr/lib/systemd/system/crio.service		localhost/
backup	/usr/lib/systemd/system/crio-wipe.service		localhost/
backup	/usr/lib/systemd/system/kubelet.service		localhost/
backup	/usr/lib/systemd/system/podman.service		localhost/
backup	/usr/lib/systemd/system/podman.socket		localhost/
backup	/usr/lib/systemd/system/podman-auto-update.service		localhost/
backup	/usr/lib/systemd/system/podman-auto-update.timer		localhost/
backup	/usr/lib/systemd/system/podman-restart.service		localhost/
backup	/usr/lib/systemd/user/dconf.service		localhost/
backup	/usr/lib/systemd/user/glib-pacrunner.service		localhost/
backup	/usr/lib/systemd/user/graphical-session-pre.target.wants/session-migration.service		localhost/
backup	/usr/lib/systemd/user/podman.service		localhost/
backup	/usr/lib/systemd/user/podman.socket		localhost/
backup	/usr/lib/systemd/user/session-migration.service		localhost/
# backup	/usr/libexec/		localhost/
backup	/usr/libexec/crio/		localhost/
# backup	/usr/libexec/dconf-service/		localhost/
backup	/usr/libexec/glib-pacrunner		localhost/
backup	/usr/libexec/podman/		localhost/
backup	/usr/sbin/conntrack		localhost/
backup	/usr/sbin/criu		localhost/
# backup	/usr/sbin/criu-us		localhost/
backup	/usr/sbin/ebtables		localhost/
backup	/usr/sbin/ebtablesd		localhost/
backup	/usr/sbin/ebtables-legacy		localhost/
backup	/usr/sbin/ebtablesu		localhost/
# backup	/usr/share/		localhost/
# backup	/var/cache/apt/		localhost/
# backup	/var/cache/debconf/		localhost/
# backup	/var/cache/man/		localhost/
# backup	/var/lib/apt/		localhost/
# backup	/var/lib/command-not-found/		localhost/
backup	/var/lib/containers/		localhost/
backup	/var/lib/crio/		localhost/
# backup	/var/lib/dpkg/		localhost/
# backup	/var/lib/systemd/		localhost/ ssh가 뻑나는데
backup	/var/lib/systemd/deb-systemd-helper-enabled/cni-dhcp.service.dsh-also		localhost/
backup	/var/lib/systemd/deb-systemd-helper-enabled/cni-dhcp.socket.dsh-also		localhost/
backup	/var/lib/systemd/deb-systemd-helper-enabled/default.target.wants		localhost/
backup	/var/lib/systemd/deb-systemd-helper-enabled/default.target.wants/podman-auto-update.service		localhost/
backup	/var/lib/systemd/deb-systemd-helper-enabled/default.target.wants/podman-restart.service		localhost/
backup	/var/lib/systemd/deb-systemd-helper-enabled/kubelet.service.dsh-also		localhost/
backup	/var/lib/systemd/deb-systemd-helper-enabled/multi-user.target.wants/kubelet.service		localhost/
backup	/var/lib/systemd/deb-systemd-helper-enabled/podman.service.dsh-also		localhost/
backup	/var/lib/systemd/deb-systemd-helper-enabled/podman.socket.dsh-also		localhost/
backup	/var/lib/systemd/deb-systemd-helper-enabled/podman-auto-update.service.dsh-also		localhost/
backup	/var/lib/systemd/deb-systemd-helper-enabled/podman-auto-update.timer.dsh-also		localhost/
backup	/var/lib/systemd/deb-systemd-helper-enabled/podman-restart.service.dsh-also		localhost/
backup	/var/lib/systemd/deb-systemd-helper-enabled/sockets.target.wants/podman.socket		localhost/
backup	/var/lib/systemd/deb-systemd-helper-enabled/timers.target.wants/podman-auto-update.timer		localhost/
backup	/var/lib/systemd/deb-systemd-user-helper-enabled/default.target.wants		localhost/
backup	/var/lib/systemd/deb-systemd-user-helper-enabled/graphical-session-pre.target.wants		localhost/
backup	/var/lib/systemd/deb-systemd-user-helper-enabled/podman.service.dsh-also		localhost/
backup	/var/lib/systemd/deb-systemd-user-helper-enabled/podman.socket.dsh-also		localhost/
backup	/var/lib/systemd/deb-systemd-user-helper-enabled/session-migration.service.dsh-also		localhost/
backup	/var/lib/systemd/deb-systemd-user-helper-enabled/sockets.target.wants/podman.socket		localhost/
backup	/var/lib/systemd/timers/stamp-podman-auto-update.timer		localhost/
# backup	/run/netcns/		localhost/ 존재 안함
# backup	/run/runc/		localhost/
# backup	/run/utsns/		localhost/
# backup	/var/lib/etcd/		localhost/
backup	/var/lib/kubelet/		localhost/

# init, join
# backup	/run/runc/		localhost/
# backup	/run/utsns/		localhost/
backup	/var/lib/kubelet/		localhost/
# backup	/run/xtables.lock		localhost/

# LOCALHOST
# backup	/home/		localhost/
# backup	/etc/		localhost/
# backup	/usr/local/	localhost/
#backup	/var/log/rsnapshot		localhost/
#backup	/etc/passwd	localhost/
#backup	/home/foo/My Documents/		localhost/
#backup	/foo/bar/	localhost/	one_fs=1,rsync_short_args=-urltvpog
#backup_script	/usr/local/bin/backup_pgsql.sh	localhost/postgres/
# You must set linux_lvm_* parameters below before using lvm snapshots
#backup	lvm://vg0/xen-home/	lvm-vg0/xen-home/

# EXAMPLE.COM
#backup_exec	/bin/date "+ backup of example.com started at %c"
#backup	root@example.com:/home/	example.com/	+rsync_long_args=--bwlimit=16,exclude=core
#backup	root@example.com:/etc/	example.com/	exclude=mtab,exclude=core
#backup_exec	ssh root@example.com "mysqldump -A > /var/db/dump/mysql.sql"
#backup	root@example.com:/var/db/dump/	example.com/
#backup_exec	/bin/date "+ backup of example.com ended at %c"

# CVS.SOURCEFORGE.NET
#backup_script	/usr/local/bin/backup_rsnapshot_cvsroot.sh	rsnapshot.cvs.sourceforge.net/

# RSYNC.SAMBA.ORG
#backup	rsync://rsync.samba.org/rsyncftp/	rsync.samba.org/rsyncftp/

